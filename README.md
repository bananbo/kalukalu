# Kalukalu 🦠

YouTube配信と連動するインタラクティブな生態系シミュレーションゲーム

## 概要

Kalukaluは、YouTube Liveのコメントに基づいて動的に生物を生成し、生態系をシミュレーションするゲームです。視聴者のコメントから生物の特徴が決定され、画面上でユニークな生物たちが生き生きと動き回ります。

## 主な機能

- 📺 **YouTube Live連動**: ライブ配信のコメントをリアルタイムで取得
- 🧬 **プロシージャル生成**: コメント内容に基づいてユニークな生物を自動生成
- 🎨 **SVGグラフィックス**: 美しいベクターグラフィックスで生物を描画
- 🌍 **生態系シミュレーション**: 生物同士が相互作用する動的な環境
- 🎮 **デバッグモード**: AI APIなしでダミーデータを使用したテストが可能

## 技術スタック

- **フロントエンド**: React + TypeScript + Vite
- **バックエンド**: Node.js + Express + WebSocket
- **API連携**: YouTube Data API v3
- **AI解析**: OpenAI API / Anthropic Claude API (オプション)
- **グラフィックス**: SVG

## セットアップ

### 1. 依存関係のインストール

\`\`\`bash
npm install
\`\`\`

### 2. 環境変数の設定

\`.env.example\`をコピーして\`.env\`ファイルを作成します。

\`\`\`bash
cp .env.example .env
\`\`\`

\`.env\`ファイルに以下の情報を設定します：

\`\`\`env
# YouTube Data API v3
YOUTUBE_API_KEY=your_youtube_api_key_here

# OpenAI API (コメント解析用 - デバッグモードでは不要)
OPENAI_API_KEY=your_openai_api_key_here

# サーバーポート
PORT=3001
\`\`\`

### 3. 開発サーバーの起動

\`\`\`bash
npm run dev
\`\`\`

これにより、以下のサーバーが起動します：
- フロントエンド: http://localhost:3000
- バックエンド: http://localhost:3001

## 使い方

### デバッグモード（推奨：初回テスト用）

1. ブラウザで http://localhost:3000 を開く
2. サイドバーの「デバッグモード」セクションで生物の特徴を入力
3. 「生物を作成」ボタンをクリック
4. クイックテストボタンで簡単にサンプル生物を生成可能

デバッグモードでは、AI APIを使用せずにキーワードマッチングで生物が生成されます。

### YouTube Live連動モード

1. YouTube配信を開始
2. 動画のIDを取得（URLの`v=`パラメータ）
3. サイドバーの「YouTube配信」セクションにVideo IDを入力
4. 「配信開始」ボタンをクリック
5. 視聴者のコメントから自動的に生物が生成されます

## 生物の特徴

生物は以下の属性を持ちます：

### 基本ステータス
- **速さ**: 移動速度
- **サイズ**: 生物の大きさ
- **力**: 戦闘能力
- **知性**: 行動の複雑さ
- **社会性**: 群れで行動する傾向

### 外見
- **体の形状**: 円形、三角形、四角形、星形、有機的
- **色**: プライマリカラーとセカンダリカラー
- **パターン**: 無地、縞模様、斑点、グラデーション
- **特徴**: 目、触手、翼

### 行動
- **食性**: 草食、肉食、雑食
- **活動時間**: 昼行性、夜行性
- **社会性**: 単独、群れ、群衆

## コメント例

以下のようなコメントで特徴的な生物を作成できます：

- 「速くて小さい青い生物」
- 「大きくて強い赤い肉食生物」
- 「翼を持つ賢い夜行性の生物」
- 「群れで行動する緑の草食生物」
- 「触手を持つ巨大な深海生物」

## プロジェクト構造

\`\`\`
kalukalu/
├── server/              # バックエンド
│   ├── index.ts        # エントリーポイント
│   └── services/       # サービス層
│       ├── youtubeLiveChat.ts    # YouTube API連携
│       └── creatureGenerator.ts  # 生物生成ロジック
├── src/                # フロントエンド
│   ├── components/     # Reactコンポーネント
│   │   ├── EcosystemCanvas.tsx   # メインキャンバス
│   │   ├── CreatureSVG.tsx       # SVG生物描画
│   │   ├── ControlPanel.tsx      # コントロールパネル
│   │   └── CreatureList.tsx      # 生物リスト
│   ├── types/          # TypeScript型定義
│   └── App.tsx         # メインアプリ
└── package.json
\`\`\`

## 今後の拡張予定

- [ ] 生物同士の相互作用（捕食、繁殖）
- [ ] 植物や食物連鎖の実装
- [ ] 環境要因（気温、湿度など）
- [ ] より高度なAI解析
- [ ] 生物の進化システム
- [ ] リプレイ機能
- [ ] 配信者用のオーバーレイ機能

## ライセンス

MIT

## 開発者

作成者: あなたの名前
